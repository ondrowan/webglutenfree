{"version":3,"file":"glutenfree.js","sources":["../build/device.js","../build/assert.js","../build/glutil.js","../build/command.js","../build/vertex-buffer.js","../build/array.js","../build/element-buffer.js","../build/vertex-array.js","../build/texture.js","../build/framebuffer.js"],"sourcesContent":["export class Device {\n    constructor(gl, canvas, explicitPixelRatio, explicitViewport) {\n        this.gl = gl;\n        this.canvas = canvas;\n        this.explicitPixelRatio = explicitPixelRatio;\n        this.explicitViewport = explicitViewport;\n    }\n    static mount(element = document.body, options) {\n        if (element instanceof HTMLCanvasElement) {\n            return Device.fromCanvas(element, options);\n        }\n        const canvas = document.createElement(\"canvas\");\n        element.appendChild(canvas);\n        return Device.fromCanvas(canvas, options);\n    }\n    static fromCanvas(canvas, options) {\n        const gl = canvas.getContext(\"webgl2\");\n        if (!gl) {\n            throw new Error(\"Could not get webgl2 context\");\n        }\n        return Device.fromContext(gl, options);\n    }\n    static fromContext(gl, { pixelRatio, viewport, extensions, } = {}) {\n        if (extensions) {\n            extensions.forEach(ext => {\n                if (!gl.getExtension(ext)) {\n                    throw new Error(`Could not get extension ${ext}`);\n                }\n            });\n        }\n        const dev = new Device(gl, gl.canvas, pixelRatio, viewport);\n        dev.update();\n        return dev;\n    }\n    get bufferWidth() {\n        return this.gl.drawingBufferWidth;\n    }\n    get bufferHeight() {\n        return this.gl.drawingBufferHeight;\n    }\n    get canvasWidth() {\n        return this.canvas.width;\n    }\n    get canvasHeight() {\n        return this.canvas.height;\n    }\n    get canvasCSSWidth() {\n        return this.canvas.clientWidth;\n    }\n    get canvasCSSHeight() {\n        return this.canvas.clientHeight;\n    }\n    get pixelRatio() {\n        return this.explicitPixelRatio || window.devicePixelRatio;\n    }\n    update() {\n        const dpr = this.pixelRatio;\n        const canvas = this.canvas;\n        const width = this.explicitViewport\n            && this.explicitViewport[0]\n            || canvas.clientWidth * dpr;\n        const height = this.explicitViewport\n            && this.explicitViewport[1]\n            || canvas.clientHeight * dpr;\n        if (width !== canvas.width) {\n            canvas.width = width;\n        }\n        if (height !== canvas.height) {\n            canvas.height = height;\n        }\n    }\n    clearColorBuffer(r, g, b, a, fbo) {\n        const gl = this.gl;\n        if (fbo) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, fbo.glFramebuffer);\n        }\n        gl.clearColor(r, g, b, a);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        if (fbo) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        }\n    }\n    clearDepthBuffer(depth, fbo) {\n        const gl = this.gl;\n        if (fbo) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, fbo.glFramebuffer);\n        }\n        gl.clearDepth(depth);\n        gl.clear(gl.DEPTH_BUFFER_BIT);\n        if (fbo) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        }\n    }\n    clearStencilBuffer(stencil, fbo) {\n        const gl = this.gl;\n        if (fbo) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, fbo.glFramebuffer);\n        }\n        gl.clearStencil(stencil);\n        gl.clear(gl.STENCIL_BUFFER_BIT);\n        if (fbo) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        }\n    }\n    clear(r, g, b, a, depth, stencil, fbo) {\n        const gl = this.gl;\n        if (fbo) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, fbo.glFramebuffer);\n        }\n        gl.clearColor(r, g, b, a);\n        gl.clearDepth(depth);\n        gl.clearStencil(stencil);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT | gl.STENCIL_BUFFER_BIT);\n        if (fbo) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        }\n    }\n}\n//# sourceMappingURL=device.js.map","export function truthy(a, msg) {\n    if (!a) {\n        throw new Error(fmt(msg));\n    }\n}\nexport function equal(a, b, msg) {\n    if (a !== b) {\n        throw new Error(fmt(msg || `Not equal: ${a} ${b}`));\n    }\n}\nexport function never(a, msg) {\n    throw new Error(fmt(msg || `Unexpected object: ${a}`));\n}\nexport function notEmpty(a, msg) {\n    if (!a.length) {\n        throw new Error(fmt(msg || \"Array empty\"));\n    }\n}\nfunction fmt(msg) {\n    if (msg) {\n        return `Assertion Failed: ${msg}`;\n    }\n    return `Assertion Failed`;\n}\n//# sourceMappingURL=assert.js.map","import * as assert from \"./assert\";\n/*\n███████╗██╗  ██╗ █████╗ ██████╗ ███████╗██████╗\n██╔════╝██║  ██║██╔══██╗██╔══██╗██╔════╝██╔══██╗\n███████╗███████║███████║██║  ██║█████╗  ██████╔╝\n╚════██║██╔══██║██╔══██║██║  ██║██╔══╝  ██╔══██╗\n███████║██║  ██║██║  ██║██████╔╝███████╗██║  ██║\n╚══════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═════╝ ╚══════╝╚═╝  ╚═╝\n*/\nexport function createProgram(gl, vertex, fragment) {\n    const program = gl.createProgram();\n    if (!program) {\n        throw new Error(\"Could not create Program\");\n    }\n    gl.attachShader(program, vertex);\n    gl.attachShader(program, fragment);\n    gl.linkProgram(program);\n    if (gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        return program;\n    }\n    const msg = gl.getProgramInfoLog(program);\n    gl.deleteProgram(program);\n    throw new Error(`Could not link shader program: ${msg}`);\n}\nexport function createShader(gl, type, source) {\n    const shader = gl.createShader(type);\n    if (!shader) {\n        throw new Error(\"Could not create Shader\");\n    }\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    if (gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        return shader;\n    }\n    const msg = gl.getShaderInfoLog(shader);\n    gl.deleteShader(shader);\n    const prettySource = source\n        .split(\"\\n\")\n        .map((l, i) => `${i + 1}: ${l}`)\n        .join(\"\\n\");\n    throw new Error(`Could not compile shader:\\n${msg}\\n${prettySource}`);\n}\n/*\n██████╗ ██╗   ██╗███████╗███████╗███████╗██████╗\n██╔══██╗██║   ██║██╔════╝██╔════╝██╔════╝██╔══██╗\n██████╔╝██║   ██║█████╗  █████╗  █████╗  ██████╔╝\n██╔══██╗██║   ██║██╔══╝  ██╔══╝  ██╔══╝  ██╔══██╗\n██████╔╝╚██████╔╝██║     ██║     ███████╗██║  ██║\n╚═════╝  ╚═════╝ ╚═╝     ╚═╝     ╚══════╝╚═╝  ╚═╝\n*/\nexport function createArrayBuffer(gl, values) {\n    const buffer = gl.createBuffer();\n    if (!buffer) {\n        throw new Error(\"Could not create buffer\");\n    }\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, Array.isArray(values)\n        ? new Float32Array(values)\n        : values, gl.STATIC_DRAW);\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    return buffer;\n}\nexport function createElementArrayBuffer(gl, elements) {\n    const buffer = gl.createBuffer();\n    if (!buffer) {\n        throw new Error(\"Could not create buffer\");\n    }\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, Array.isArray(elements)\n        ? new Uint32Array(elements)\n        : elements, gl.STATIC_DRAW);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    return buffer;\n}\nexport function createVertexArray(gl, buffers, elementBuffer) {\n    const vao = gl.createVertexArray();\n    if (!vao) {\n        throw new Error(\"Could not create Vertex Array Object\");\n    }\n    gl.bindVertexArray(vao);\n    buffers.forEach(({ type, buffer, bufferType, size, location, normalized = false, divisor, }) => {\n        // Enable sending attribute arrays for location\n        gl.enableVertexAttribArray(location);\n        // Send buffer\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        switch (type) {\n            case 0 /* POINTER */:\n                gl.vertexAttribPointer(location, size, bufferType, normalized, 0, 0);\n                break;\n            case 1 /* IPOINTER */:\n                gl.vertexAttribIPointer(location, size, bufferType, 0, 0);\n                break;\n            default: assert.never(type);\n        }\n        if (divisor) {\n            gl.vertexAttribDivisor(location, divisor);\n        }\n    });\n    if (elementBuffer) {\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elementBuffer);\n    }\n    gl.bindVertexArray(null);\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    return vao;\n}\n/*\n████████╗███████╗██╗  ██╗████████╗██╗   ██╗██████╗ ███████╗\n╚══██╔══╝██╔════╝╚██╗██╔╝╚══██╔══╝██║   ██║██╔══██╗██╔════╝\n   ██║   █████╗   ╚███╔╝    ██║   ██║   ██║██████╔╝█████╗\n   ██║   ██╔══╝   ██╔██╗    ██║   ██║   ██║██╔══██╗██╔══╝\n   ██║   ███████╗██╔╝ ██╗   ██║   ╚██████╔╝██║  ██║███████╗\n   ╚═╝   ╚══════╝╚═╝  ╚═╝   ╚═╝    ╚═════╝ ╚═╝  ╚═╝╚══════╝\n*/\nexport function createTexture(gl, data, width, height, internalFormat, format, type, wrapS, wrapT, min, mag, mipmap) {\n    const texture = gl.createTexture();\n    if (!texture) {\n        throw new Error(\"Could not create texture\");\n    }\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texStorage2D(gl.TEXTURE_2D, 1, internalFormat, width, height);\n    if (data) {\n        gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, width, height, format, type, data);\n    }\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, min);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, mag);\n    if (mipmap) {\n        gl.generateMipmap(gl.TEXTURE_2D);\n    }\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    return texture;\n}\n//# sourceMappingURL=glutil.js.map","import * as assert from \"./assert\";\nimport * as glutil from \"./glutil\";\nimport { Device } from \"./device\";\nconst INT_PATTERN = /^0|[1-9]\\d*$/;\nconst UNKNOWN_ATTRIB_LOCATION = -1;\nexport class Command {\n    constructor(gl, glProgram, glPrimitive, uniformDescriptors, blendDescriptor, framebufferDescriptor) {\n        this.gl = gl;\n        this.glProgram = glProgram;\n        this.glPrimitive = glPrimitive;\n        this.uniformDescriptors = uniformDescriptors;\n        this.blendDescriptor = blendDescriptor;\n        this.framebufferDescriptor = framebufferDescriptor;\n    }\n    static create(dev, { vert, frag, uniforms = {}, primitive = \"triangles\" /* TRIANGLES */, blend = false, framebuffer, }) {\n        const gl = dev instanceof Device ? dev.gl : dev;\n        const vertShader = glutil.createShader(gl, gl.VERTEX_SHADER, vert);\n        const fragShader = glutil.createShader(gl, gl.FRAGMENT_SHADER, frag);\n        const program = glutil.createProgram(gl, vertShader, fragShader);\n        gl.deleteShader(vertShader);\n        gl.deleteShader(fragShader);\n        const uniformDescriptors = Object.entries(uniforms)\n            .map(([identifier, uniform]) => {\n            const location = gl.getUniformLocation(program, identifier);\n            if (!location) {\n                throw new Error(`No location for uniform: ${identifier}`);\n            }\n            return new UniformDescriptor(identifier, location, uniform);\n        });\n        const blendDescriptor = blend\n            ? new BlendDescriptor(mapGlBlendFunc(gl, typeof blend.src === \"object\" ? blend.src.rgb : blend.src), mapGlBlendFunc(gl, typeof blend.src === \"object\" ? blend.src.alpha : blend.src), mapGlBlendFunc(gl, typeof blend.dst === \"object\" ? blend.dst.rgb : blend.dst), mapGlBlendFunc(gl, typeof blend.dst === \"object\" ? blend.dst.alpha : blend.dst), mapGlBlendEquation(gl, blend.equation\n                ? typeof blend.equation === \"object\"\n                    ? blend.equation.rgb\n                    : blend.equation\n                : \"add\" /* ADD */), mapGlBlendEquation(gl, blend.equation\n                ? typeof blend.equation === \"object\"\n                    ? blend.equation.alpha\n                    : blend.equation\n                : \"add\" /* ADD */), blend.color)\n            : undefined;\n        const framebufferDescriptor = framebuffer\n            ? new FramebufferDescriptor(framebuffer)\n            : undefined;\n        return new Command(gl, program, mapGlPrimitive(gl, primitive), uniformDescriptors, blendDescriptor, framebufferDescriptor);\n    }\n    execute(vao, props) {\n        const { gl, glProgram } = this;\n        gl.useProgram(glProgram);\n        this.beginBlend();\n        if (Array.isArray(vao)) {\n            vao.forEach((v, i) => this.executeInner(v, props, i));\n        }\n        else {\n            this.executeInner(vao, props, 0);\n        }\n        this.endBlend();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        gl.bindVertexArray(null);\n    }\n    locate({ attributes, elements }) {\n        const { gl, glProgram } = this;\n        const locatedAttributes = Object.entries(attributes)\n            .reduce((accum, [identifier, definition]) => {\n            if (INT_PATTERN.test(identifier)) {\n                accum[identifier] = definition;\n            }\n            else {\n                const location = gl.getAttribLocation(glProgram, identifier);\n                if (location === UNKNOWN_ATTRIB_LOCATION) {\n                    throw new Error(`No location for attrib: ${identifier}`);\n                }\n                accum[location] = definition;\n            }\n            return accum;\n        }, {});\n        return { attributes: locatedAttributes, elements };\n    }\n    executeInner(vao, props, index) {\n        const gl = this.gl;\n        let bufferWidth = gl.drawingBufferWidth;\n        let bufferHeight = gl.drawingBufferHeight;\n        const fbo = this.framebufferDescriptor\n            ? access(props, index, this.framebufferDescriptor.definition)\n            : undefined;\n        if (fbo) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, fbo.glFramebuffer);\n            gl.drawBuffers(fbo.glColorAttachments);\n            bufferWidth = fbo.width;\n            bufferHeight = fbo.height;\n        }\n        gl.viewport(0, 0, bufferWidth, bufferHeight);\n        this.updateUniforms(props, index);\n        gl.bindVertexArray(vao.glVertexArrayObject);\n        if (vao.hasElements) {\n            this.drawElements(vao.count, vao.instanceCount);\n        }\n        else {\n            this.drawArrays(vao.count, vao.instanceCount);\n        }\n    }\n    beginBlend() {\n        const { gl, blendDescriptor } = this;\n        if (blendDescriptor) {\n            gl.enable(gl.BLEND);\n            gl.blendFuncSeparate(blendDescriptor.srcRGB, blendDescriptor.dstRGB, blendDescriptor.srcAlpha, blendDescriptor.dstAlpha);\n            gl.blendEquationSeparate(blendDescriptor.equationRGB, blendDescriptor.equationAlpha);\n            if (blendDescriptor.color) {\n                const [r, g, b, a] = blendDescriptor.color;\n                gl.blendColor(r, g, b, a);\n            }\n        }\n    }\n    endBlend() {\n        const { gl, blendDescriptor } = this;\n        if (blendDescriptor) {\n            gl.disable(gl.BLEND);\n        }\n    }\n    drawArrays(count, instCount) {\n        const { gl, glPrimitive } = this;\n        if (instCount) {\n            gl.drawArraysInstanced(glPrimitive, 0, count, instCount);\n        }\n        else {\n            gl.drawArrays(glPrimitive, 0, count);\n        }\n    }\n    drawElements(count, instCount) {\n        const { gl, glPrimitive } = this;\n        if (instCount) {\n            gl.drawElementsInstanced(glPrimitive, count, gl.UNSIGNED_INT, // We only support u32 indices\n            0, instCount);\n        }\n        else {\n            gl.drawElements(glPrimitive, count, gl.UNSIGNED_INT, // We only support u32 indices\n            0);\n        }\n    }\n    updateUniforms(props, index) {\n        const gl = this.gl;\n        let textureUnitOffset = 0;\n        this.uniformDescriptors.forEach(({ identifier: ident, location: loc, definition: def, }) => {\n            switch (def.type) {\n                case \"1f\":\n                    gl.uniform1f(loc, access(props, index, def.value));\n                    break;\n                case \"1fv\":\n                    gl.uniform1fv(loc, access(props, index, def.value));\n                    break;\n                case \"1i\":\n                    gl.uniform1i(loc, access(props, index, def.value));\n                    break;\n                case \"1iv\":\n                    gl.uniform1iv(loc, access(props, index, def.value));\n                    break;\n                case \"1ui\":\n                    gl.uniform1ui(loc, access(props, index, def.value));\n                    break;\n                case \"1uiv\":\n                    gl.uniform1uiv(loc, access(props, index, def.value));\n                    break;\n                case \"2f\": {\n                    const [x, y] = access(props, index, def.value);\n                    gl.uniform2f(loc, x, y);\n                    break;\n                }\n                case \"2fv\":\n                    gl.uniform2fv(loc, access(props, index, def.value));\n                    break;\n                case \"2i\": {\n                    const [x, y] = access(props, index, def.value);\n                    gl.uniform2i(loc, x, y);\n                    break;\n                }\n                case \"2iv\":\n                    gl.uniform2iv(loc, access(props, index, def.value));\n                    break;\n                case \"2ui\": {\n                    const [x, y] = access(props, index, def.value);\n                    gl.uniform2ui(loc, x, y);\n                    break;\n                }\n                case \"2uiv\":\n                    gl.uniform2uiv(loc, access(props, index, def.value));\n                    break;\n                case \"3f\": {\n                    const [x, y, z] = access(props, index, def.value);\n                    gl.uniform3f(loc, x, y, z);\n                    break;\n                }\n                case \"3fv\":\n                    gl.uniform3fv(loc, access(props, index, def.value));\n                    break;\n                case \"3i\": {\n                    const [x, y, z] = access(props, index, def.value);\n                    gl.uniform3i(loc, x, y, z);\n                    break;\n                }\n                case \"3iv\":\n                    gl.uniform3iv(loc, access(props, index, def.value));\n                    break;\n                case \"3ui\": {\n                    const [x, y, z] = access(props, index, def.value);\n                    gl.uniform3ui(loc, x, y, z);\n                    break;\n                }\n                case \"3uiv\":\n                    gl.uniform3uiv(loc, access(props, index, def.value));\n                    break;\n                case \"4f\": {\n                    const [x, y, z, w] = access(props, index, def.value);\n                    gl.uniform4f(loc, x, y, z, w);\n                    break;\n                }\n                case \"4fv\":\n                    gl.uniform4fv(loc, access(props, index, def.value));\n                    break;\n                case \"4i\": {\n                    const [x, y, z, w] = access(props, index, def.value);\n                    gl.uniform4i(loc, x, y, z, w);\n                    break;\n                }\n                case \"4iv\":\n                    gl.uniform4iv(loc, access(props, index, def.value));\n                    break;\n                case \"4ui\": {\n                    const [x, y, z, w] = access(props, index, def.value);\n                    gl.uniform4ui(loc, x, y, z, w);\n                    break;\n                }\n                case \"4uiv\":\n                    gl.uniform4uiv(loc, access(props, index, def.value));\n                    break;\n                case \"matrix2fv\":\n                    gl.uniformMatrix2fv(loc, false, access(props, index, def.value));\n                    break;\n                case \"matrix3fv\":\n                    gl.uniformMatrix3fv(loc, false, access(props, index, def.value));\n                    break;\n                case \"matrix4fv\":\n                    gl.uniformMatrix4fv(loc, false, access(props, index, def.value));\n                    break;\n                case \"texture\":\n                    // TODO: is this the best way? (is it fast? can we cache?)\n                    const texture = access(props, index, def.value);\n                    const currentTexture = textureUnitOffset++;\n                    gl.activeTexture(gl.TEXTURE0 + currentTexture);\n                    gl.bindTexture(gl.TEXTURE_2D, texture.glTexture);\n                    gl.uniform1i(loc, currentTexture);\n                    break;\n                default:\n                    assert.never(def, `Unknown uniform type: (${ident})`);\n                    break;\n            }\n        });\n    }\n}\nfunction access(props, index, value) {\n    return typeof value === \"function\" ? value(props, index) : value;\n}\nclass BlendDescriptor {\n    constructor(srcRGB, srcAlpha, dstRGB, dstAlpha, equationRGB, equationAlpha, color) {\n        this.srcRGB = srcRGB;\n        this.srcAlpha = srcAlpha;\n        this.dstRGB = dstRGB;\n        this.dstAlpha = dstAlpha;\n        this.equationRGB = equationRGB;\n        this.equationAlpha = equationAlpha;\n        this.color = color;\n    }\n}\nclass FramebufferDescriptor {\n    constructor(definition) {\n        this.definition = definition;\n    }\n}\nclass UniformDescriptor {\n    constructor(identifier, location, definition) {\n        this.identifier = identifier;\n        this.location = location;\n        this.definition = definition;\n    }\n}\nfunction mapGlPrimitive(gl, primitive) {\n    switch (primitive) {\n        case \"triangles\" /* TRIANGLES */: return gl.TRIANGLES;\n        case \"triangle-strip\" /* TRIANGLE_STRIP */: return gl.TRIANGLE_STRIP;\n        case \"triangle-fan\" /* TRIANGLE_FAN */: return gl.TRIANGLE_FAN;\n        case \"points\" /* POINTS */: return gl.POINTS;\n        case \"lines\" /* LINES */: return gl.LINES;\n        case \"line-strip\" /* LINE_STRIP */: return gl.LINE_STRIP;\n        case \"line-loop\" /* LINE_LOOP */: return gl.LINE_LOOP;\n        default: return assert.never(primitive);\n    }\n}\nfunction mapGlBlendFunc(gl, func) {\n    switch (func) {\n        case \"zero\" /* ZERO */: return gl.ZERO;\n        case \"one\" /* ONE */: return gl.ONE;\n        case \"src-color\" /* SRC_COLOR */: return gl.SRC_COLOR;\n        case \"src-alpha\" /* SRC_ALPHA */: return gl.SRC_ALPHA;\n        case \"one-minus-src-color\" /* ONE_MINUS_SRC_COLOR */: return gl.ONE_MINUS_SRC_COLOR;\n        case \"one-minus-src-alpha\" /* ONE_MINUS_SRC_ALPHA */: return gl.ONE_MINUS_SRC_ALPHA;\n        case \"dst-color\" /* DST_COLOR */: return gl.DST_COLOR;\n        case \"dst-alpha\" /* DST_ALPHA */: return gl.DST_ALPHA;\n        case \"one-minus-dst-color\" /* ONE_MINUS_DST_COLOR */: return gl.ONE_MINUS_DST_COLOR;\n        case \"one-minus-dst-alpha\" /* ONE_MINUS_DST_ALPHA */: return gl.ONE_MINUS_DST_ALPHA;\n        case \"constant-color\" /* CONSTANT_COLOR */: return gl.CONSTANT_COLOR;\n        case \"constant-alpha\" /* CONSTANT_ALPHA */: return gl.CONSTANT_ALPHA;\n        case \"one-minus-constant-color\" /* ONE_MINUS_CONSTANT_COLOR */:\n            return gl.ONE_MINUS_CONSTANT_COLOR;\n        case \"one-minus-constant-alpha\" /* ONE_MINUS_CONSTANT_ALPHA */:\n            return gl.ONE_MINUS_CONSTANT_ALPHA;\n        default: return assert.never(func);\n    }\n}\nfunction mapGlBlendEquation(gl, equation) {\n    switch (equation) {\n        case \"add\" /* ADD */: return gl.FUNC_ADD;\n        case \"subtract\" /* SUBTRACT */: return gl.FUNC_SUBTRACT;\n        case \"reverse-subtract\" /* REVERSE_SUBTRACT */: return gl.FUNC_REVERSE_SUBTRACT;\n        case \"min\" /* MIN */: return gl.MIN;\n        case \"max\" /* MAX */: return gl.MAX;\n        default: return assert.never(equation);\n    }\n}\n//# sourceMappingURL=command.js.map","import * as assert from \"./assert\";\nimport * as glutil from \"./glutil\";\nimport { Device } from \"./device\";\nexport class VertexBuffer {\n    constructor(gl, type, glType, data) {\n        this.gl = gl;\n        this.type = type;\n        this.glType = glType;\n        this.glBuffer = glutil.createArrayBuffer(gl, data);\n    }\n    static create(dev, props) {\n        const gl = dev instanceof Device ? dev.gl : dev;\n        switch (props.type) {\n            case \"i8\": return VertexBuffer.fromInt8Array(gl, props.data);\n            case \"i16\": return VertexBuffer.fromInt16Array(gl, props.data);\n            case \"i32\": return VertexBuffer.fromInt32Array(gl, props.data);\n            case \"u8\": return VertexBuffer.fromUint8Array(gl, props.data);\n            case \"u16\": return VertexBuffer.fromUint16Array(gl, props.data);\n            case \"u32\": return VertexBuffer.fromUint32Array(gl, props.data);\n            case \"f32\": return VertexBuffer.fromFloat32Array(gl, props.data);\n            default: return assert.never(props);\n        }\n    }\n    static fromInt8Array(dev, data) {\n        const gl = dev instanceof Device ? dev.gl : dev;\n        return new VertexBuffer(gl, \"i8\", gl.BYTE, data instanceof Int8Array ? data : new Int8Array(data));\n    }\n    static fromInt16Array(dev, data) {\n        const gl = dev instanceof Device ? dev.gl : dev;\n        return new VertexBuffer(gl, \"i16\", gl.SHORT, data instanceof Int16Array ? data : new Int16Array(data));\n    }\n    static fromInt32Array(dev, data) {\n        const gl = dev instanceof Device ? dev.gl : dev;\n        return new VertexBuffer(gl, \"i32\", gl.INT, data instanceof Int32Array ? data : new Int32Array(data));\n    }\n    static fromUint8Array(dev, data) {\n        const gl = dev instanceof Device ? dev.gl : dev;\n        return new VertexBuffer(gl, \"u8\", gl.UNSIGNED_BYTE, \n        // Note: we also have to convert Uint8ClampedArray to Uint8Array\n        // because of webgl bug\n        // https://github.com/KhronosGroup/WebGL/issues/1533\n        data instanceof Uint8Array ? data : new Uint8Array(data));\n    }\n    static fromUint16Array(dev, data) {\n        const gl = dev instanceof Device ? dev.gl : dev;\n        return new VertexBuffer(gl, \"u16\", gl.UNSIGNED_SHORT, data instanceof Uint16Array ? data : new Uint16Array(data));\n    }\n    static fromUint32Array(dev, data) {\n        const gl = dev instanceof Device ? dev.gl : dev;\n        return new VertexBuffer(gl, \"u32\", gl.UNSIGNED_INT, data instanceof Uint32Array ? data : new Uint32Array(data));\n    }\n    static fromFloat32Array(dev, data) {\n        const gl = dev instanceof Device ? dev.gl : dev;\n        return new VertexBuffer(gl, \"f32\", gl.FLOAT, data instanceof Float32Array ? data : new Float32Array(data));\n    }\n}\n//# sourceMappingURL=vertex-buffer.js.map","/**\n * Chacks whether array is at least 2d, mostly useful because of return type\n * predicate.\n */\nexport function is2DArray(array) {\n    return !!array.length || Array.isArray(array[0]);\n}\n/**\n * Flatten 2d array and compute its former shape.\n * eg.\n * ravel([\n *      [1, 2, 3],\n *      [4, 5, 6],\n * ])\n * produces {\n *      data: [1, 2, 3, 4, 5, 6],\n *      shape: [2, 3],\n * }\n */\nexport function ravel(unraveled) {\n    const outerShape = unraveled.length;\n    const innerShape = outerShape ? unraveled[0].length : 0;\n    const raveled = new Array(innerShape * outerShape);\n    unraveled.forEach((inner, i) => {\n        inner.forEach((elem, j) => {\n            raveled[innerShape * i + j] = elem;\n        });\n    });\n    return { data: raveled, shape: [outerShape, innerShape] };\n}\n//# sourceMappingURL=array.js.map","import * as array from \"./array\";\nimport * as glutil from \"./glutil\";\nimport { Device } from \"./device\";\nexport class ElementBuffer {\n    constructor(glBuffer, count) {\n        this.glBuffer = glBuffer;\n        this.count = count;\n    }\n    static create(dev, props) {\n        return Array.isArray(props)\n            ? ElementBuffer.fromArray(dev, props)\n            : ElementBuffer.fromUint32Array(dev, props.data);\n    }\n    static fromArray(dev, data) {\n        return ElementBuffer.fromUint32Array(dev, array.is2DArray(data)\n            ? array.ravel(data).data\n            : data);\n    }\n    static fromUint32Array(dev, data) {\n        const gl = dev instanceof Device ? dev.gl : dev;\n        const arr = Array.isArray(data) ? new Uint32Array(data) : data;\n        const buffer = glutil.createElementArrayBuffer(gl, arr);\n        return new ElementBuffer(buffer, arr.length);\n    }\n}\n//# sourceMappingURL=element-buffer.js.map","import * as assert from \"./assert\";\nimport * as array from \"./array\";\nimport * as glutil from \"./glutil\";\nimport { Device } from \"./device\";\nimport { VertexBuffer, } from \"./vertex-buffer\";\nimport { ElementBuffer, } from \"./element-buffer\";\nconst INT_PATTERN = /^0|[1-9]\\d*$/;\nexport class VertexArray {\n    constructor(glVertexArrayObject, hasElements, count, // Either count of vertex data or of elements\n        instanceCount) {\n        this.glVertexArrayObject = glVertexArrayObject;\n        this.hasElements = hasElements;\n        this.count = count;\n        this.instanceCount = instanceCount;\n    }\n    static create(dev, { attributes, elements }) {\n        const gl = dev instanceof Device ? dev.gl : dev;\n        // Setup attributes\n        const attribDescriptors = [];\n        const attribLocations = [];\n        Object.entries(attributes).forEach(([locationStr, definition]) => {\n            if (!INT_PATTERN.test(locationStr)) {\n                throw new Error(\"Location not a number. Use Command#locate\");\n            }\n            const location = parseInt(locationStr, 10);\n            attribLocations.push(location);\n            attribDescriptors.push(AttributeDescriptor.create(gl, definition));\n        });\n        // Setup elements\n        let elems;\n        if (elements) {\n            elems = elements instanceof ElementBuffer\n                ? elements\n                : ElementBuffer.create(gl, elements);\n        }\n        // Create vertex array\n        const vao = glutil.createVertexArray(gl, attribDescriptors.map((attrib, i) => ({\n            type: attrib.type === \"ipointer\"\n                ? 1 /* IPOINTER */\n                : 0 /* POINTER */,\n            buffer: attrib.buffer.glBuffer,\n            bufferType: attrib.buffer.glType,\n            size: attrib.size,\n            location: attribLocations[i],\n            normalized: attrib.normalized,\n            divisor: attrib.divisor,\n        })), elems ? elems.glBuffer : undefined);\n        // Compute max safe instance count\n        const instancedBuffers = attribDescriptors\n            .filter(buffer => !!buffer.divisor);\n        const instanceCount = instancedBuffers.length\n            ? instancedBuffers\n                .map(b => b.count * b.divisor)\n                .reduce((min, curr) => Math.min(min, curr))\n            : 0;\n        // Create VAO\n        return new VertexArray(vao, !!elems, elems ? elems.count : attribDescriptors[0].count, instanceCount);\n    }\n}\n// TODO: this could use some further refactoring. Currently its just former\n// public API made private.\nclass AttributeDescriptor {\n    static create(gl, props) {\n        if (Array.isArray(props)) {\n            if (array.is2DArray(props)) {\n                const r = array.ravel(props);\n                return new AttributeDescriptor(\"pointer\", VertexBuffer.fromFloat32Array(gl, r.data), r.shape[0], r.shape[1], false, 0);\n            }\n            return new AttributeDescriptor(\"pointer\", VertexBuffer.fromFloat32Array(gl, props), props.length, 1, false, 0);\n        }\n        switch (props.type) {\n            case \"pointer\": return new AttributeDescriptor(props.type, props.value instanceof VertexBuffer\n                ? props.value\n                // Note: typescript is not smart enough to infer what we know\n                : VertexBuffer.create(gl, props.value), props.count, props.size, props.normalized || false, props.divisor || 0);\n            case \"ipointer\": return new AttributeDescriptor(props.type, props.value instanceof VertexBuffer\n                ? props.value\n                // Note: typescript is not smart enough to infer what we know\n                : VertexBuffer.create(gl, props.value), props.count, props.size, false, props.divisor || 0);\n            default: return assert.never(props);\n        }\n    }\n    constructor(type, buffer, count, size, normalized, divisor) {\n        this.type = type;\n        this.buffer = buffer;\n        this.count = count;\n        this.size = size;\n        this.normalized = normalized;\n        this.divisor = divisor;\n    }\n}\n//# sourceMappingURL=vertex-array.js.map","import * as assert from \"./assert\";\nimport * as glutil from \"./glutil\";\nimport { Device } from \"./device\";\nexport class Texture {\n    constructor(glTexture, width, height) {\n        this.glTexture = glTexture;\n        this.width = width;\n        this.height = height;\n    }\n    static fromImage(dev, image, options) {\n        return Texture.fromRGBA8(dev, image.data, image.width, image.height, options);\n    }\n    static fromRGBA8(dev, data, width, height, options) {\n        return Texture.fromArrayBufferView(dev, !data || data instanceof Uint8Array\n            ? data\n            // Note: we also have to convert Uint8ClampedArray to Uint8Array\n            // because of webgl bug\n            // https://github.com/KhronosGroup/WebGL/issues/1533\n            : new Uint8Array(data), width, height, \"RGBA8\" /* RGBA8 */, \"RGBA\" /* RGBA */, \"UNSIGNED_BYTE\" /* UNSIGNED_BYTE */, options);\n    }\n    static fromRG16F(dev, data, width, height, options) {\n        return Texture.fromArrayBufferView(dev, !data || data instanceof Float32Array\n            ? data\n            : new Float32Array(data), width, height, \"RG16F\" /* RG16F */, \"RG\" /* RG */, \"FLOAT\" /* FLOAT */, options);\n    }\n    static fromRGB16F(dev, data, width, height, options) {\n        return Texture.fromArrayBufferView(dev, !data || data instanceof Float32Array\n            ? data\n            : new Float32Array(data), width, height, \"RGB16F\" /* RGB16F */, \"RGB\" /* RGB */, \"FLOAT\" /* FLOAT */, options);\n    }\n    static fromRGBA16F(dev, data, width, height, options) {\n        return Texture.fromArrayBufferView(dev, !data || data instanceof Float32Array\n            ? data\n            : new Float32Array(data), width, height, \"RGBA16F\" /* RGBA16F */, \"RGBA\" /* RGBA */, \"FLOAT\" /* FLOAT */, options);\n    }\n    static fromRGB32F(dev, data, width, height, options) {\n        return Texture.fromArrayBufferView(dev, !data || data instanceof Float32Array\n            ? data\n            : new Float32Array(data), width, height, \"RGB32F\" /* RGB32F */, \"RGB\" /* RGB */, \"FLOAT\" /* FLOAT */, options);\n    }\n    static fromRGBA32F(dev, data, width, height, options) {\n        return Texture.fromArrayBufferView(dev, !data || data instanceof Float32Array\n            ? data\n            : new Float32Array(data), width, height, \"RGBA32F\" /* RGBA32F */, \"RGBA\" /* RGBA */, \"FLOAT\" /* FLOAT */, options);\n    }\n    static fromArrayBufferView(dev, data, width, height, internalFormat, format, type, { min = \"nearest\" /* NEAREST */, mag = \"nearest\" /* NEAREST */, wrapS = \"clamp-to-edge\" /* CLAMP_TO_EDGE */, wrapT = \"clamp-to-edge\" /* CLAMP_TO_EDGE */, mipmap = false, } = {}) {\n        const gl = dev instanceof Device ? dev.gl : dev;\n        return new Texture(glutil.createTexture(gl, data, width, height, mapGlTextureInternalFormat(gl, internalFormat), mapGlTextureFormat(gl, format), mapGlTextureType(gl, type), mapGlTextureWrap(gl, wrapS), mapGlTextureWrap(gl, wrapT), mapGlTextureFilter(gl, min), mapGlTextureFilter(gl, mag), mipmap), width, height);\n    }\n}\nfunction mapGlTextureWrap(gl, wrap) {\n    switch (wrap) {\n        case \"clamp-to-edge\" /* CLAMP_TO_EDGE */: return gl.CLAMP_TO_EDGE;\n        case \"repeat\" /* REPEAT */: return gl.REPEAT;\n        case \"mirrored-repeat\" /* MIRRORED_REPEAT */: return gl.MIRRORED_REPEAT;\n        default: return assert.never(wrap);\n    }\n}\nfunction mapGlTextureFilter(gl, filter) {\n    switch (filter) {\n        case \"nearest\" /* NEAREST */: return gl.NEAREST;\n        case \"linear\" /* LINEAR */: return gl.LINEAR;\n        case \"nearest-mipmap-nearest\" /* NEAREST_MIPMAP_NEAREST */:\n            return gl.NEAREST_MIPMAP_NEAREST;\n        case \"linear-mipmap-nearest\" /* LINEAR_MIPMAP_NEAREST */:\n            return gl.LINEAR_MIPMAP_NEAREST;\n        case \"nearest-mipmap-linear\" /* NEAREST_MIPMAP_LINEAR */:\n            return gl.NEAREST_MIPMAP_LINEAR;\n        case \"linear-mipmap-linear\" /* LINEAR_MIPMAP_LINEAR */:\n            return gl.LINEAR_MIPMAP_LINEAR;\n        default: return assert.never(filter);\n    }\n}\nfunction mapGlTextureInternalFormat(gl, internalFormat) {\n    switch (internalFormat) {\n        // R\n        case \"R8\" /* R8 */: return gl.R8;\n        case \"R8_SNORM\" /* R8_SNORM */: return gl.R8_SNORM;\n        case \"R8UI\" /* R8UI */: return gl.R8UI;\n        case \"R8I\" /* R8I */: return gl.R8I;\n        case \"R16UI\" /* R16UI */: return gl.R16UI;\n        case \"R16I\" /* R16I */: return gl.R16I;\n        case \"R32UI\" /* R32UI */: return gl.R32UI;\n        case \"R32I\" /* R32I */: return gl.R32I;\n        case \"R16F\" /* R16F */: return gl.R16I;\n        case \"R32F\" /* R32F */: return gl.R32F;\n        // RG\n        case \"RG8\" /* RG8 */: return gl.RG8;\n        case \"RG8_SNORM\" /* RG8_SNORM */: return gl.RG8_SNORM;\n        case \"RG8UI\" /* RG8UI */: return gl.RG8UI;\n        case \"RG8I\" /* RG8I */: return gl.RG8I;\n        case \"RG16UI\" /* RG16UI */: return gl.RG16UI;\n        case \"RG16I\" /* RG16I */: return gl.RG16I;\n        case \"RG32UI\" /* RG32UI */: return gl.RG32UI;\n        case \"RG32I\" /* RG32I */: return gl.RG32I;\n        case \"RG16F\" /* RG16F */: return gl.RG16F;\n        case \"RG32F\" /* RG32F */: return gl.RG32F;\n        // RGB\n        case \"RGB8\" /* RGB8 */: return gl.RGB8;\n        case \"RGB8_SNORM\" /* RGB8_SNORM */: return gl.RGB8_SNORM;\n        case \"RGB8UI\" /* RGB8UI */: return gl.RGB8UI;\n        case \"RGB8I\" /* RGB8I */: return gl.RGB8I;\n        case \"RGB16UI\" /* RGB16UI */: return gl.RGB16UI;\n        case \"RGB16I\" /* RGB16I */: return gl.RGB16I;\n        case \"RGB32UI\" /* RGB32UI */: return gl.RGB32UI;\n        case \"RGB32I\" /* RGB32I */: return gl.RGB32I;\n        case \"RGB16F\" /* RGB16F */: return gl.RGB16F;\n        case \"RGB32F\" /* RGB32F */: return gl.RGB32F;\n        // RGBA\n        case \"RGBA8\" /* RGBA8 */: return gl.RGBA8;\n        case \"RGBA8_SNORM\" /* RGBA8_SNORM */: return gl.RGBA8_SNORM;\n        case \"RGBA8UI\" /* RGBA8UI */: return gl.RGBA8UI;\n        case \"RGBA8I\" /* RGBA8I */: return gl.RGBA8I;\n        case \"RGBA16UI\" /* RGBA16UI */: return gl.RGBA16UI;\n        case \"RGBA16I\" /* RGBA16I */: return gl.RGBA16I;\n        case \"RGBA32UI\" /* RGBA32UI */: return gl.RGBA32UI;\n        case \"RGBA32I\" /* RGBA32I */: return gl.RGBA32I;\n        case \"RGBA16F\" /* RGBA16F */: return gl.RGBA16F;\n        case \"RGBA32F\" /* RGBA32F */: return gl.RGBA32F;\n        default: return assert.never(internalFormat);\n    }\n}\nfunction mapGlTextureFormat(gl, format) {\n    switch (format) {\n        case \"RED\" /* RED */: return gl.RED;\n        case \"RG\" /* RG */: return gl.RG;\n        case \"RGB\" /* RGB */: return gl.RGB;\n        case \"RGBA\" /* RGBA */: return gl.RGBA;\n        case \"RED_INTEGER\" /* RED_INTEGER */: return gl.RED_INTEGER;\n        case \"RG_INTEGER\" /* RG_INTEGER */: return gl.RG_INTEGER;\n        case \"RGB_INTEGER\" /* RGB_INTEGER */: return gl.RGB_INTEGER;\n        case \"RGBA_INTEGER\" /* RGBA_INTEGER */: return gl.RGBA_INTEGER;\n        default: return assert.never(format);\n    }\n}\nfunction mapGlTextureType(gl, type) {\n    switch (type) {\n        case \"UNSIGNED_BYTE\" /* UNSIGNED_BYTE */: return gl.UNSIGNED_BYTE;\n        case \"UNSIGNED_SHORT\" /* UNSIGNED_SHORT */: return gl.UNSIGNED_SHORT;\n        case \"UNSIGNED_INT\" /* UNSIGNED_INT */: return gl.UNSIGNED_INT;\n        case \"BYTE\" /* BYTE */: return gl.BYTE;\n        case \"SHORT\" /* SHORT */: return gl.SHORT;\n        case \"INT\" /* INT */: return gl.INT;\n        case \"FLOAT\" /* FLOAT */: return gl.FLOAT;\n    }\n}\n//# sourceMappingURL=texture.js.map","import * as assert from \"./assert\";\nimport { Device } from \"./device\";\nexport class Framebuffer {\n    constructor(glFramebuffer, width, height, glColorAttachments) {\n        this.glFramebuffer = glFramebuffer;\n        this.width = width;\n        this.height = height;\n        this.glColorAttachments = glColorAttachments;\n    }\n    static create(dev, { width, height, color, depth, stencil }) {\n        const gl = dev instanceof Device ? dev.gl : dev;\n        const fbo = gl.createFramebuffer();\n        if (!fbo) {\n            throw new Error(\"Could not create framebuffer\");\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n        const colorBuffers = Array.isArray(color) ? color : [color];\n        colorBuffers.forEach((buffer, i) => {\n            assert.equal(width, buffer.width);\n            assert.equal(height, buffer.height);\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0 + i, gl.TEXTURE_2D, buffer.glTexture, 0);\n        });\n        if (depth) {\n            assert.equal(width, depth.width);\n            assert.equal(height, depth.height);\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.TEXTURE_2D, depth, 0);\n        }\n        if (stencil) {\n            assert.equal(width, stencil.width);\n            assert.equal(height, stencil.height);\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.STENCIL_ATTACHMENT, gl.TEXTURE_2D, stencil, 0);\n        }\n        const status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        if (status !== gl.FRAMEBUFFER_COMPLETE) {\n            gl.deleteFramebuffer(fbo);\n            throw new Error(\"Framebuffer not complete\");\n        }\n        return new Framebuffer(fbo, width, height, colorBuffers.map((_, i) => gl.COLOR_ATTACHMENT0 + i));\n    }\n}\n//# sourceMappingURL=framebuffer.js.map"],"names":["assert.never","glutil.createShader","glutil.createProgram","glutil.createArrayBuffer","array.is2DArray","array.ravel","glutil.createElementArrayBuffer","INT_PATTERN","glutil.createVertexArray","glutil.createTexture","assert.equal"],"mappings":"AAAO,MAAM,MAAM,CAAC;IAChB,WAAW,CAAC,EAAE,EAAE,MAAM,EAAE,kBAAkB,EAAE,gBAAgB,EAAE;QAC1D,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;QAC7C,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;KAC5C;IACD,OAAO,KAAK,CAAC,OAAO,GAAG,QAAQ,CAAC,IAAI,EAAE,OAAO,EAAE;QAC3C,IAAI,OAAO,YAAY,iBAAiB,EAAE;YACtC,OAAO,MAAM,CAAC,UAAU,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;SAC9C;QACD,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAChD,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAC5B,OAAO,MAAM,CAAC,UAAU,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;KAC7C;IACD,OAAO,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE;QAC/B,MAAM,EAAE,GAAG,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QACvC,IAAI,CAAC,EAAE,EAAE;YACL,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC;SACnD;QACD,OAAO,MAAM,CAAC,WAAW,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;KAC1C;IACD,OAAO,WAAW,CAAC,EAAE,EAAE,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,GAAG,GAAG,EAAE,EAAE;QAC/D,IAAI,UAAU,EAAE;YACZ,UAAU,CAAC,OAAO,CAAC,GAAG,IAAI;gBACtB,IAAI,CAAC,EAAE,CAAC,YAAY,CAAC,GAAG,CAAC,EAAE;oBACvB,MAAM,IAAI,KAAK,CAAC,CAAC,wBAAwB,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;iBACrD;aACJ,CAAC,CAAC;SACN;QACD,MAAM,GAAG,GAAG,IAAI,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,MAAM,EAAE,UAAU,EAAE,QAAQ,CAAC,CAAC;QAC5D,GAAG,CAAC,MAAM,EAAE,CAAC;QACb,OAAO,GAAG,CAAC;KACd;IACD,IAAI,WAAW,GAAG;QACd,OAAO,IAAI,CAAC,EAAE,CAAC,kBAAkB,CAAC;KACrC;IACD,IAAI,YAAY,GAAG;QACf,OAAO,IAAI,CAAC,EAAE,CAAC,mBAAmB,CAAC;KACtC;IACD,IAAI,WAAW,GAAG;QACd,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;KAC5B;IACD,IAAI,YAAY,GAAG;QACf,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;KAC7B;IACD,IAAI,cAAc,GAAG;QACjB,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC;KAClC;IACD,IAAI,eAAe,GAAG;QAClB,OAAO,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC;KACnC;IACD,IAAI,UAAU,GAAG;QACb,OAAO,IAAI,CAAC,kBAAkB,IAAI,MAAM,CAAC,gBAAgB,CAAC;KAC7D;IACD,MAAM,GAAG;QACL,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC;QAC5B,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAC3B,MAAM,KAAK,GAAG,IAAI,CAAC,gBAAgB;eAC5B,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;eACxB,MAAM,CAAC,WAAW,GAAG,GAAG,CAAC;QAChC,MAAM,MAAM,GAAG,IAAI,CAAC,gBAAgB;eAC7B,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;eACxB,MAAM,CAAC,YAAY,GAAG,GAAG,CAAC;QACjC,IAAI,KAAK,KAAK,MAAM,CAAC,KAAK,EAAE;YACxB,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;SACxB;QACD,IAAI,MAAM,KAAK,MAAM,CAAC,MAAM,EAAE;YAC1B,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC;SAC1B;KACJ;IACD,gBAAgB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE;QAC9B,MAAM,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;QACnB,IAAI,GAAG,EAAE;YACL,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,GAAG,CAAC,aAAa,CAAC,CAAC;SACzD;QACD,EAAE,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1B,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,CAAC,CAAC;QAC9B,IAAI,GAAG,EAAE;YACL,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;SAC5C;KACJ;IACD,gBAAgB,CAAC,KAAK,EAAE,GAAG,EAAE;QACzB,MAAM,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;QACnB,IAAI,GAAG,EAAE;YACL,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,GAAG,CAAC,aAAa,CAAC,CAAC;SACzD;QACD,EAAE,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACrB,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,CAAC,CAAC;QAC9B,IAAI,GAAG,EAAE;YACL,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;SAC5C;KACJ;IACD,kBAAkB,CAAC,OAAO,EAAE,GAAG,EAAE;QAC7B,MAAM,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;QACnB,IAAI,GAAG,EAAE;YACL,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,GAAG,CAAC,aAAa,CAAC,CAAC;SACzD;QACD,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QACzB,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,kBAAkB,CAAC,CAAC;QAChC,IAAI,GAAG,EAAE;YACL,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;SAC5C;KACJ;IACD,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,EAAE;QACnC,MAAM,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;QACnB,IAAI,GAAG,EAAE;YACL,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,GAAG,CAAC,aAAa,CAAC,CAAC;SACzD;QACD,EAAE,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1B,EAAE,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACrB,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QACzB,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,gBAAgB,GAAG,EAAE,CAAC,gBAAgB,GAAG,EAAE,CAAC,kBAAkB,CAAC,CAAC;QAC5E,IAAI,GAAG,EAAE;YACL,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;SAC5C;KACJ;CACJ;;AChHM,SAAS,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE;IAC7B,IAAI,CAAC,KAAK,CAAC,EAAE;QACT,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KACvD;CACJ;AACD,AAAO,SAAS,KAAK,CAAC,CAAC,EAAE,GAAG,EAAE;IAC1B,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CAC1D;AACD,AAIC;AACD,SAAS,GAAG,CAAC,GAAG,EAAE;IACd,IAAI,GAAG,EAAE;QACL,OAAO,CAAC,kBAAkB,EAAE,GAAG,CAAC,CAAC,CAAC;KACrC;IACD,OAAO,CAAC,gBAAgB,CAAC,CAAC;CAC7B;;ACtBD;;;;;;;;AAQA,AAAO,SAAS,aAAa,CAAC,EAAE,EAAE,MAAM,EAAE,QAAQ,EAAE;IAChD,MAAM,OAAO,GAAG,EAAE,CAAC,aAAa,EAAE,CAAC;IACnC,IAAI,CAAC,OAAO,EAAE;QACV,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAC;KAC/C;IACD,EAAE,CAAC,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IACjC,EAAE,CAAC,YAAY,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;IACnC,EAAE,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;IACxB,IAAI,EAAE,CAAC,mBAAmB,CAAC,OAAO,EAAE,EAAE,CAAC,WAAW,CAAC,EAAE;QACjD,OAAO,OAAO,CAAC;KAClB;IACD,MAAM,GAAG,GAAG,EAAE,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;IAC1C,EAAE,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;IAC1B,MAAM,IAAI,KAAK,CAAC,CAAC,+BAA+B,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;CAC5D;AACD,AAAO,SAAS,YAAY,CAAC,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE;IAC3C,MAAM,MAAM,GAAG,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;IACrC,IAAI,CAAC,MAAM,EAAE;QACT,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;KAC9C;IACD,EAAE,CAAC,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;IAChC,EAAE,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;IACzB,IAAI,EAAE,CAAC,kBAAkB,CAAC,MAAM,EAAE,EAAE,CAAC,cAAc,CAAC,EAAE;QAClD,OAAO,MAAM,CAAC;KACjB;IACD,MAAM,GAAG,GAAG,EAAE,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;IACxC,EAAE,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;IACxB,MAAM,YAAY,GAAG,MAAM;SACtB,KAAK,CAAC,IAAI,CAAC;SACX,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;SAC/B,IAAI,CAAC,IAAI,CAAC,CAAC;IAChB,MAAM,IAAI,KAAK,CAAC,CAAC,2BAA2B,EAAE,GAAG,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC;CACzE;;;;;;;;;AASD,AAAO,SAAS,iBAAiB,CAAC,EAAE,EAAE,MAAM,EAAE;IAC1C,MAAM,MAAM,GAAG,EAAE,CAAC,YAAY,EAAE,CAAC;IACjC,IAAI,CAAC,MAAM,EAAE;QACT,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;KAC9C;IACD,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;IACvC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC;UAC9C,IAAI,YAAY,CAAC,MAAM,CAAC;UACxB,MAAM,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC;IAC9B,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;IACrC,OAAO,MAAM,CAAC;CACjB;AACD,AAAO,SAAS,wBAAwB,CAAC,EAAE,EAAE,QAAQ,EAAE;IACnD,MAAM,MAAM,GAAG,EAAE,CAAC,YAAY,EAAE,CAAC;IACjC,IAAI,CAAC,MAAM,EAAE;QACT,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;KAC9C;IACD,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,MAAM,CAAC,CAAC;IAC/C,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC;UACxD,IAAI,WAAW,CAAC,QAAQ,CAAC;UACzB,QAAQ,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC;IAChC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;IAC7C,OAAO,MAAM,CAAC;CACjB;AACD,AAAO,SAAS,iBAAiB,CAAC,EAAE,EAAE,OAAO,EAAE,aAAa,EAAE;IAC1D,MAAM,GAAG,GAAG,EAAE,CAAC,iBAAiB,EAAE,CAAC;IACnC,IAAI,CAAC,GAAG,EAAE;QACN,MAAM,IAAI,KAAK,CAAC,sCAAsC,CAAC,CAAC;KAC3D;IACD,EAAE,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;IACxB,OAAO,CAAC,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAE,UAAU,GAAG,KAAK,EAAE,OAAO,GAAG,KAAK;;QAE5F,EAAE,CAAC,uBAAuB,CAAC,QAAQ,CAAC,CAAC;;QAErC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;QACvC,QAAQ,IAAI;YACR,KAAK,CAAC;gBACF,EAAE,CAAC,mBAAmB,CAAC,QAAQ,EAAE,IAAI,EAAE,UAAU,EAAE,UAAU,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBACrE,MAAM;YACV,KAAK,CAAC;gBACF,EAAE,CAAC,oBAAoB,CAAC,QAAQ,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC1D,MAAM;YACV,SAASA,KAAY,CAAC,IAAI,CAAC,CAAC;SAC/B;QACD,IAAI,OAAO,EAAE;YACT,EAAE,CAAC,mBAAmB,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;SAC7C;KACJ,CAAC,CAAC;IACH,IAAI,aAAa,EAAE;QACf,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,aAAa,CAAC,CAAC;KACzD;IACD,EAAE,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;IACzB,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;IACrC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;IAC7C,OAAO,GAAG,CAAC;CACd;;;;;;;;;AASD,AAAO,SAAS,aAAa,CAAC,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,cAAc,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE;IACjH,MAAM,OAAO,GAAG,EAAE,CAAC,aAAa,EAAE,CAAC;IACnC,IAAI,CAAC,OAAO,EAAE;QACV,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAC;KAC/C;IACD,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;IACvC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAAE,cAAc,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;IACjE,IAAI,IAAI,EAAE;QACN,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;KAC/E;IACD,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;IAC1D,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;IAC1D,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,GAAG,CAAC,CAAC;IAC5D,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,GAAG,CAAC,CAAC;IAC5D,IAAI,MAAM,EAAE;QACR,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;KACpC;IACD,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IACpC,OAAO,OAAO,CAAC;CAClB;;AClID,MAAM,WAAW,GAAG,cAAc,CAAC;AACnC,MAAM,uBAAuB,GAAG,CAAC,CAAC,CAAC;AACnC,AAAO,MAAM,OAAO,CAAC;IACjB,WAAW,CAAC,EAAE,EAAE,SAAS,EAAE,WAAW,EAAE,kBAAkB,EAAE,eAAe,EAAE,qBAAqB,EAAE;QAChG,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;QAC7C,IAAI,CAAC,eAAe,GAAG,eAAe,CAAC;QACvC,IAAI,CAAC,qBAAqB,GAAG,qBAAqB,CAAC;KACtD;IACD,OAAO,MAAM,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,GAAG,EAAE,EAAE,SAAS,GAAG,WAAW,kBAAkB,KAAK,GAAG,KAAK,EAAE,WAAW,GAAG,EAAE;QACpH,MAAM,EAAE,GAAG,GAAG,YAAY,MAAM,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC;QAChD,MAAM,UAAU,GAAGC,YAAmB,CAAC,EAAE,EAAE,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;QACnE,MAAM,UAAU,GAAGA,YAAmB,CAAC,EAAE,EAAE,EAAE,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QACrE,MAAM,OAAO,GAAGC,aAAoB,CAAC,EAAE,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC;QACjE,EAAE,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;QAC5B,EAAE,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;QAC5B,MAAM,kBAAkB,GAAG,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;aAC9C,GAAG,CAAC,CAAC,CAAC,UAAU,EAAE,OAAO,CAAC,KAAK;YAChC,MAAM,QAAQ,GAAG,EAAE,CAAC,kBAAkB,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;YAC5D,IAAI,CAAC,QAAQ,EAAE;gBACX,MAAM,IAAI,KAAK,CAAC,CAAC,yBAAyB,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;aAC7D;YACD,OAAO,IAAI,iBAAiB,CAAC,UAAU,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;SAC/D,CAAC,CAAC;QACH,MAAM,eAAe,GAAG,KAAK;cACvB,IAAI,eAAe,CAAC,cAAc,CAAC,EAAE,EAAE,OAAO,KAAK,CAAC,GAAG,KAAK,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,cAAc,CAAC,EAAE,EAAE,OAAO,KAAK,CAAC,GAAG,KAAK,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAC,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,cAAc,CAAC,EAAE,EAAE,OAAO,KAAK,CAAC,GAAG,KAAK,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,cAAc,CAAC,EAAE,EAAE,OAAO,KAAK,CAAC,GAAG,KAAK,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAC,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,kBAAkB,CAAC,EAAE,EAAE,KAAK,CAAC,QAAQ;kBACrX,OAAO,KAAK,CAAC,QAAQ,KAAK,QAAQ;sBAC9B,KAAK,CAAC,QAAQ,CAAC,GAAG;sBAClB,KAAK,CAAC,QAAQ;kBAClB,KAAK,WAAW,EAAE,kBAAkB,CAAC,EAAE,EAAE,KAAK,CAAC,QAAQ;kBACvD,OAAO,KAAK,CAAC,QAAQ,KAAK,QAAQ;sBAC9B,KAAK,CAAC,QAAQ,CAAC,KAAK;sBACpB,KAAK,CAAC,QAAQ;kBAClB,KAAK,WAAW,EAAE,KAAK,CAAC,KAAK,CAAC;cAClC,SAAS,CAAC;QAChB,MAAM,qBAAqB,GAAG,WAAW;cACnC,IAAI,qBAAqB,CAAC,WAAW,CAAC;cACtC,SAAS,CAAC;QAChB,OAAO,IAAI,OAAO,CAAC,EAAE,EAAE,OAAO,EAAE,cAAc,CAAC,EAAE,EAAE,SAAS,CAAC,EAAE,kBAAkB,EAAE,eAAe,EAAE,qBAAqB,CAAC,CAAC;KAC9H;IACD,OAAO,CAAC,GAAG,EAAE,KAAK,EAAE;QAChB,MAAM,EAAE,EAAE,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAC/B,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QACzB,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;YACpB,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;SACzD;aACI;YACD,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;SACpC;QACD,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QACzC,EAAE,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;KAC5B;IACD,MAAM,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,EAAE;QAC7B,MAAM,EAAE,EAAE,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAC/B,MAAM,iBAAiB,GAAG,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC;aAC/C,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC,UAAU,EAAE,UAAU,CAAC,KAAK;YAC7C,IAAI,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;gBAC9B,KAAK,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC;aAClC;iBACI;gBACD,MAAM,QAAQ,GAAG,EAAE,CAAC,iBAAiB,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;gBAC7D,IAAI,QAAQ,KAAK,uBAAuB,EAAE;oBACtC,MAAM,IAAI,KAAK,CAAC,CAAC,wBAAwB,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;iBAC5D;gBACD,KAAK,CAAC,QAAQ,CAAC,GAAG,UAAU,CAAC;aAChC;YACD,OAAO,KAAK,CAAC;SAChB,EAAE,EAAE,CAAC,CAAC;QACP,OAAO,EAAE,UAAU,EAAE,iBAAiB,EAAE,QAAQ,EAAE,CAAC;KACtD;IACD,YAAY,CAAC,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE;QAC5B,MAAM,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;QACnB,IAAI,WAAW,GAAG,EAAE,CAAC,kBAAkB,CAAC;QACxC,IAAI,YAAY,GAAG,EAAE,CAAC,mBAAmB,CAAC;QAC1C,MAAM,GAAG,GAAG,IAAI,CAAC,qBAAqB;cAChC,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC;cAC3D,SAAS,CAAC;QAChB,IAAI,GAAG,EAAE;YACL,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,GAAG,CAAC,aAAa,CAAC,CAAC;YACtD,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;YACvC,WAAW,GAAG,GAAG,CAAC,KAAK,CAAC;YACxB,YAAY,GAAG,GAAG,CAAC,MAAM,CAAC;SAC7B;QACD,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC;QAC7C,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;QAClC,EAAE,CAAC,eAAe,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;QAC5C,IAAI,GAAG,CAAC,WAAW,EAAE;YACjB,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,aAAa,CAAC,CAAC;SACnD;aACI;YACD,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,aAAa,CAAC,CAAC;SACjD;KACJ;IACD,UAAU,GAAG;QACT,MAAM,EAAE,EAAE,EAAE,eAAe,EAAE,GAAG,IAAI,CAAC;QACrC,IAAI,eAAe,EAAE;YACjB,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;YACpB,EAAE,CAAC,iBAAiB,CAAC,eAAe,CAAC,MAAM,EAAE,eAAe,CAAC,MAAM,EAAE,eAAe,CAAC,QAAQ,EAAE,eAAe,CAAC,QAAQ,CAAC,CAAC;YACzH,EAAE,CAAC,qBAAqB,CAAC,eAAe,CAAC,WAAW,EAAE,eAAe,CAAC,aAAa,CAAC,CAAC;YACrF,IAAI,eAAe,CAAC,KAAK,EAAE;gBACvB,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,eAAe,CAAC,KAAK,CAAC;gBAC3C,EAAE,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;aAC7B;SACJ;KACJ;IACD,QAAQ,GAAG;QACP,MAAM,EAAE,EAAE,EAAE,eAAe,EAAE,GAAG,IAAI,CAAC;QACrC,IAAI,eAAe,EAAE;YACjB,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;SACxB;KACJ;IACD,UAAU,CAAC,KAAK,EAAE,SAAS,EAAE;QACzB,MAAM,EAAE,EAAE,EAAE,WAAW,EAAE,GAAG,IAAI,CAAC;QACjC,IAAI,SAAS,EAAE;YACX,EAAE,CAAC,mBAAmB,CAAC,WAAW,EAAE,CAAC,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;SAC5D;aACI;YACD,EAAE,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;SACxC;KACJ;IACD,YAAY,CAAC,KAAK,EAAE,SAAS,EAAE;QAC3B,MAAM,EAAE,EAAE,EAAE,WAAW,EAAE,GAAG,IAAI,CAAC;QACjC,IAAI,SAAS,EAAE;YACX,EAAE,CAAC,qBAAqB,CAAC,WAAW,EAAE,KAAK,EAAE,EAAE,CAAC,YAAY;YAC5D,CAAC,EAAE,SAAS,CAAC,CAAC;SACjB;aACI;YACD,EAAE,CAAC,YAAY,CAAC,WAAW,EAAE,KAAK,EAAE,EAAE,CAAC,YAAY;YACnD,CAAC,CAAC,CAAC;SACN;KACJ;IACD,cAAc,CAAC,KAAK,EAAE,KAAK,EAAE;QACzB,MAAM,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;QACnB,IAAI,iBAAiB,GAAG,CAAC,CAAC;QAC1B,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,EAAE,UAAU,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,EAAE,UAAU,EAAE,GAAG,GAAG,KAAK;YACxF,QAAQ,GAAG,CAAC,IAAI;gBACZ,KAAK,IAAI;oBACL,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACnD,MAAM;gBACV,KAAK,KAAK;oBACN,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACpD,MAAM;gBACV,KAAK,IAAI;oBACL,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACnD,MAAM;gBACV,KAAK,KAAK;oBACN,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACpD,MAAM;gBACV,KAAK,KAAK;oBACN,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACpD,MAAM;gBACV,KAAK,MAAM;oBACP,EAAE,CAAC,WAAW,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACrD,MAAM;gBACV,KAAK,IAAI,EAAE;oBACP,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;oBAC/C,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBACxB,MAAM;iBACT;gBACD,KAAK,KAAK;oBACN,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACpD,MAAM;gBACV,KAAK,IAAI,EAAE;oBACP,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;oBAC/C,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBACxB,MAAM;iBACT;gBACD,KAAK,KAAK;oBACN,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACpD,MAAM;gBACV,KAAK,KAAK,EAAE;oBACR,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;oBAC/C,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBACzB,MAAM;iBACT;gBACD,KAAK,MAAM;oBACP,EAAE,CAAC,WAAW,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACrD,MAAM;gBACV,KAAK,IAAI,EAAE;oBACP,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;oBAClD,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC3B,MAAM;iBACT;gBACD,KAAK,KAAK;oBACN,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACpD,MAAM;gBACV,KAAK,IAAI,EAAE;oBACP,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;oBAClD,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC3B,MAAM;iBACT;gBACD,KAAK,KAAK;oBACN,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACpD,MAAM;gBACV,KAAK,KAAK,EAAE;oBACR,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;oBAClD,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC5B,MAAM;iBACT;gBACD,KAAK,MAAM;oBACP,EAAE,CAAC,WAAW,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACrD,MAAM;gBACV,KAAK,IAAI,EAAE;oBACP,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;oBACrD,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC9B,MAAM;iBACT;gBACD,KAAK,KAAK;oBACN,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACpD,MAAM;gBACV,KAAK,IAAI,EAAE;oBACP,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;oBACrD,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC9B,MAAM;iBACT;gBACD,KAAK,KAAK;oBACN,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACpD,MAAM;gBACV,KAAK,KAAK,EAAE;oBACR,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;oBACrD,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC/B,MAAM;iBACT;gBACD,KAAK,MAAM;oBACP,EAAE,CAAC,WAAW,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACrD,MAAM;gBACV,KAAK,WAAW;oBACZ,EAAE,CAAC,gBAAgB,CAAC,GAAG,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACjE,MAAM;gBACV,KAAK,WAAW;oBACZ,EAAE,CAAC,gBAAgB,CAAC,GAAG,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACjE,MAAM;gBACV,KAAK,WAAW;oBACZ,EAAE,CAAC,gBAAgB,CAAC,GAAG,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;oBACjE,MAAM;gBACV,KAAK,SAAS;;oBAEV,MAAM,OAAO,GAAG,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;oBAChD,MAAM,cAAc,GAAG,iBAAiB,EAAE,CAAC;oBAC3C,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,GAAG,cAAc,CAAC,CAAC;oBAC/C,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC,SAAS,CAAC,CAAC;oBACjD,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC;oBAClC,MAAM;gBACV;oBACIF,KAAY,CAAC,GAAG,EAAE,CAAC,uBAAuB,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;oBACtD,MAAM;aACb;SACJ,CAAC,CAAC;KACN;CACJ;AACD,SAAS,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE;IACjC,OAAO,OAAO,KAAK,KAAK,UAAU,GAAG,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,GAAG,KAAK,CAAC;CACpE;AACD,MAAM,eAAe,CAAC;IAClB,WAAW,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,aAAa,EAAE,KAAK,EAAE;QAC/E,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACnC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACtB;CACJ;AACD,MAAM,qBAAqB,CAAC;IACxB,WAAW,CAAC,UAAU,EAAE;QACpB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;KAChC;CACJ;AACD,MAAM,iBAAiB,CAAC;IACpB,WAAW,CAAC,UAAU,EAAE,QAAQ,EAAE,UAAU,EAAE;QAC1C,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;KAChC;CACJ;AACD,SAAS,cAAc,CAAC,EAAE,EAAE,SAAS,EAAE;IACnC,QAAQ,SAAS;QACb,KAAK,WAAW,kBAAkB,OAAO,EAAE,CAAC,SAAS,CAAC;QACtD,KAAK,gBAAgB,uBAAuB,OAAO,EAAE,CAAC,cAAc,CAAC;QACrE,KAAK,cAAc,qBAAqB,OAAO,EAAE,CAAC,YAAY,CAAC;QAC/D,KAAK,QAAQ,eAAe,OAAO,EAAE,CAAC,MAAM,CAAC;QAC7C,KAAK,OAAO,cAAc,OAAO,EAAE,CAAC,KAAK,CAAC;QAC1C,KAAK,YAAY,mBAAmB,OAAO,EAAE,CAAC,UAAU,CAAC;QACzD,KAAK,WAAW,kBAAkB,OAAO,EAAE,CAAC,SAAS,CAAC;QACtD,SAAS,OAAOA,KAAY,CAAC,SAAS,CAAC,CAAC;KAC3C;CACJ;AACD,SAAS,cAAc,CAAC,EAAE,EAAE,IAAI,EAAE;IAC9B,QAAQ,IAAI;QACR,KAAK,MAAM,aAAa,OAAO,EAAE,CAAC,IAAI,CAAC;QACvC,KAAK,KAAK,YAAY,OAAO,EAAE,CAAC,GAAG,CAAC;QACpC,KAAK,WAAW,kBAAkB,OAAO,EAAE,CAAC,SAAS,CAAC;QACtD,KAAK,WAAW,kBAAkB,OAAO,EAAE,CAAC,SAAS,CAAC;QACtD,KAAK,qBAAqB,4BAA4B,OAAO,EAAE,CAAC,mBAAmB,CAAC;QACpF,KAAK,qBAAqB,4BAA4B,OAAO,EAAE,CAAC,mBAAmB,CAAC;QACpF,KAAK,WAAW,kBAAkB,OAAO,EAAE,CAAC,SAAS,CAAC;QACtD,KAAK,WAAW,kBAAkB,OAAO,EAAE,CAAC,SAAS,CAAC;QACtD,KAAK,qBAAqB,4BAA4B,OAAO,EAAE,CAAC,mBAAmB,CAAC;QACpF,KAAK,qBAAqB,4BAA4B,OAAO,EAAE,CAAC,mBAAmB,CAAC;QACpF,KAAK,gBAAgB,uBAAuB,OAAO,EAAE,CAAC,cAAc,CAAC;QACrE,KAAK,gBAAgB,uBAAuB,OAAO,EAAE,CAAC,cAAc,CAAC;QACrE,KAAK,0BAA0B;YAC3B,OAAO,EAAE,CAAC,wBAAwB,CAAC;QACvC,KAAK,0BAA0B;YAC3B,OAAO,EAAE,CAAC,wBAAwB,CAAC;QACvC,SAAS,OAAOA,KAAY,CAAC,IAAI,CAAC,CAAC;KACtC;CACJ;AACD,SAAS,kBAAkB,CAAC,EAAE,EAAE,QAAQ,EAAE;IACtC,QAAQ,QAAQ;QACZ,KAAK,KAAK,YAAY,OAAO,EAAE,CAAC,QAAQ,CAAC;QACzC,KAAK,UAAU,iBAAiB,OAAO,EAAE,CAAC,aAAa,CAAC;QACxD,KAAK,kBAAkB,yBAAyB,OAAO,EAAE,CAAC,qBAAqB,CAAC;QAChF,KAAK,KAAK,YAAY,OAAO,EAAE,CAAC,GAAG,CAAC;QACpC,KAAK,KAAK,YAAY,OAAO,EAAE,CAAC,GAAG,CAAC;QACpC,SAAS,OAAOA,KAAY,CAAC,QAAQ,CAAC,CAAC;KAC1C;CACJ;;AClUM,MAAM,YAAY,CAAC;IACtB,WAAW,CAAC,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE;QAChC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAGG,iBAAwB,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;KACtD;IACD,OAAO,MAAM,CAAC,GAAG,EAAE,KAAK,EAAE;QACtB,MAAM,EAAE,GAAG,GAAG,YAAY,MAAM,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC;QAChD,QAAQ,KAAK,CAAC,IAAI;YACd,KAAK,IAAI,EAAE,OAAO,YAAY,CAAC,aAAa,CAAC,EAAE,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;YAC7D,KAAK,KAAK,EAAE,OAAO,YAAY,CAAC,cAAc,CAAC,EAAE,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;YAC/D,KAAK,KAAK,EAAE,OAAO,YAAY,CAAC,cAAc,CAAC,EAAE,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;YAC/D,KAAK,IAAI,EAAE,OAAO,YAAY,CAAC,cAAc,CAAC,EAAE,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;YAC9D,KAAK,KAAK,EAAE,OAAO,YAAY,CAAC,eAAe,CAAC,EAAE,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;YAChE,KAAK,KAAK,EAAE,OAAO,YAAY,CAAC,eAAe,CAAC,EAAE,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;YAChE,KAAK,KAAK,EAAE,OAAO,YAAY,CAAC,gBAAgB,CAAC,EAAE,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;YACjE,SAAS,OAAOH,KAAY,CAAC,KAAK,CAAC,CAAC;SACvC;KACJ;IACD,OAAO,aAAa,CAAC,GAAG,EAAE,IAAI,EAAE;QAC5B,MAAM,EAAE,GAAG,GAAG,YAAY,MAAM,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC;QAChD,OAAO,IAAI,YAAY,CAAC,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,EAAE,IAAI,YAAY,SAAS,GAAG,IAAI,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;KACtG;IACD,OAAO,cAAc,CAAC,GAAG,EAAE,IAAI,EAAE;QAC7B,MAAM,EAAE,GAAG,GAAG,YAAY,MAAM,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC;QAChD,OAAO,IAAI,YAAY,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE,CAAC,KAAK,EAAE,IAAI,YAAY,UAAU,GAAG,IAAI,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;KAC1G;IACD,OAAO,cAAc,CAAC,GAAG,EAAE,IAAI,EAAE;QAC7B,MAAM,EAAE,GAAG,GAAG,YAAY,MAAM,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC;QAChD,OAAO,IAAI,YAAY,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE,CAAC,GAAG,EAAE,IAAI,YAAY,UAAU,GAAG,IAAI,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;KACxG;IACD,OAAO,cAAc,CAAC,GAAG,EAAE,IAAI,EAAE;QAC7B,MAAM,EAAE,GAAG,GAAG,YAAY,MAAM,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC;QAChD,OAAO,IAAI,YAAY,CAAC,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC,aAAa;;;;QAIlD,IAAI,YAAY,UAAU,GAAG,IAAI,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;KAC7D;IACD,OAAO,eAAe,CAAC,GAAG,EAAE,IAAI,EAAE;QAC9B,MAAM,EAAE,GAAG,GAAG,YAAY,MAAM,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC;QAChD,OAAO,IAAI,YAAY,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE,CAAC,cAAc,EAAE,IAAI,YAAY,WAAW,GAAG,IAAI,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;KACrH;IACD,OAAO,eAAe,CAAC,GAAG,EAAE,IAAI,EAAE;QAC9B,MAAM,EAAE,GAAG,GAAG,YAAY,MAAM,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC;QAChD,OAAO,IAAI,YAAY,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE,CAAC,YAAY,EAAE,IAAI,YAAY,WAAW,GAAG,IAAI,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;KACnH;IACD,OAAO,gBAAgB,CAAC,GAAG,EAAE,IAAI,EAAE;QAC/B,MAAM,EAAE,GAAG,GAAG,YAAY,MAAM,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC;QAChD,OAAO,IAAI,YAAY,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE,CAAC,KAAK,EAAE,IAAI,YAAY,YAAY,GAAG,IAAI,GAAG,IAAI,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;KAC9G;CACJ;;ACvDD;;;;AAIA,AAAO,SAAS,SAAS,CAAC,KAAK,EAAE;IAC7B,OAAO,CAAC,CAAC,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;CACpD;;;;;;;;;;;;;AAaD,AAAO,SAAS,KAAK,CAAC,SAAS,EAAE;IAC7B,MAAM,UAAU,GAAG,SAAS,CAAC,MAAM,CAAC;IACpC,MAAM,UAAU,GAAG,UAAU,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;IACxD,MAAM,OAAO,GAAG,IAAI,KAAK,CAAC,UAAU,GAAG,UAAU,CAAC,CAAC;IACnD,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,CAAC,KAAK;QAC5B,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC,KAAK;YACvB,OAAO,CAAC,UAAU,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;SACtC,CAAC,CAAC;KACN,CAAC,CAAC;IACH,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,CAAC;CAC7D;;AC1BM,MAAM,aAAa,CAAC;IACvB,WAAW,CAAC,QAAQ,EAAE,KAAK,EAAE;QACzB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACtB;IACD,OAAO,MAAM,CAAC,GAAG,EAAE,KAAK,EAAE;QACtB,OAAO,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC;cACrB,aAAa,CAAC,SAAS,CAAC,GAAG,EAAE,KAAK,CAAC;cACnC,aAAa,CAAC,eAAe,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;KACxD;IACD,OAAO,SAAS,CAAC,GAAG,EAAE,IAAI,EAAE;QACxB,OAAO,aAAa,CAAC,eAAe,CAAC,GAAG,EAAEI,SAAe,CAAC,IAAI,CAAC;cACzDC,KAAW,CAAC,IAAI,CAAC,CAAC,IAAI;cACtB,IAAI,CAAC,CAAC;KACf;IACD,OAAO,eAAe,CAAC,GAAG,EAAE,IAAI,EAAE;QAC9B,MAAM,EAAE,GAAG,GAAG,YAAY,MAAM,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC;QAChD,MAAM,GAAG,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;QAC/D,MAAM,MAAM,GAAGC,wBAA+B,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;QACxD,OAAO,IAAI,aAAa,CAAC,MAAM,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;KAChD;CACJ;;AClBD,MAAMC,aAAW,GAAG,cAAc,CAAC;AACnC,AAAO,MAAM,WAAW,CAAC;IACrB,WAAW,CAAC,mBAAmB,EAAE,WAAW,EAAE,KAAK;QAC/C,aAAa,EAAE;QACf,IAAI,CAAC,mBAAmB,GAAG,mBAAmB,CAAC;QAC/C,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;KACtC;IACD,OAAO,MAAM,CAAC,GAAG,EAAE,EAAE,UAAU,EAAE,QAAQ,EAAE,EAAE;QACzC,MAAM,EAAE,GAAG,GAAG,YAAY,MAAM,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC;;QAEhD,MAAM,iBAAiB,GAAG,EAAE,CAAC;QAC7B,MAAM,eAAe,GAAG,EAAE,CAAC;QAC3B,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,WAAW,EAAE,UAAU,CAAC,KAAK;YAC9D,IAAI,CAACA,aAAW,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE;gBAChC,MAAM,IAAI,KAAK,CAAC,2CAA2C,CAAC,CAAC;aAChE;YACD,MAAM,QAAQ,GAAG,QAAQ,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;YAC3C,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC/B,iBAAiB,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,EAAE,EAAE,UAAU,CAAC,CAAC,CAAC;SACtE,CAAC,CAAC;;QAEH,IAAI,KAAK,CAAC;QACV,IAAI,QAAQ,EAAE;YACV,KAAK,GAAG,QAAQ,YAAY,aAAa;kBACnC,QAAQ;kBACR,aAAa,CAAC,MAAM,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;SAC5C;;QAED,MAAM,GAAG,GAAGC,iBAAwB,CAAC,EAAE,EAAE,iBAAiB,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,MAAM;YAC3E,IAAI,EAAE,MAAM,CAAC,IAAI,KAAK,UAAU;kBAC1B,CAAC;kBACD,CAAC;YACP,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,QAAQ;YAC9B,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC,MAAM;YAChC,IAAI,EAAE,MAAM,CAAC,IAAI;YACjB,QAAQ,EAAE,eAAe,CAAC,CAAC,CAAC;YAC5B,UAAU,EAAE,MAAM,CAAC,UAAU;YAC7B,OAAO,EAAE,MAAM,CAAC,OAAO;SAC1B,CAAC,CAAC,EAAE,KAAK,GAAG,KAAK,CAAC,QAAQ,GAAG,SAAS,CAAC,CAAC;;QAEzC,MAAM,gBAAgB,GAAG,iBAAiB;aACrC,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACxC,MAAM,aAAa,GAAG,gBAAgB,CAAC,MAAM;cACvC,gBAAgB;iBACb,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC;iBAC7B,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;cAC7C,CAAC,CAAC;;QAER,OAAO,IAAI,WAAW,CAAC,GAAG,EAAE,CAAC,CAAC,KAAK,EAAE,KAAK,GAAG,KAAK,CAAC,KAAK,GAAG,iBAAiB,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC;KACzG;CACJ;;;AAGD,MAAM,mBAAmB,CAAC;IACtB,OAAO,MAAM,CAAC,EAAE,EAAE,KAAK,EAAE;QACrB,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACtB,IAAIJ,SAAe,CAAC,KAAK,CAAC,EAAE;gBACxB,MAAM,CAAC,GAAGC,KAAW,CAAC,KAAK,CAAC,CAAC;gBAC7B,OAAO,IAAI,mBAAmB,CAAC,SAAS,EAAE,YAAY,CAAC,gBAAgB,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;aAC1H;YACD,OAAO,IAAI,mBAAmB,CAAC,SAAS,EAAE,YAAY,CAAC,gBAAgB,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;SAClH;QACD,QAAQ,KAAK,CAAC,IAAI;YACd,KAAK,SAAS,EAAE,OAAO,IAAI,mBAAmB,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,KAAK,YAAY,YAAY;kBACxF,KAAK,CAAC,KAAK;;kBAEX,YAAY,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,UAAU,IAAI,KAAK,EAAE,KAAK,CAAC,OAAO,IAAI,CAAC,CAAC,CAAC;YACpH,KAAK,UAAU,EAAE,OAAO,IAAI,mBAAmB,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,KAAK,YAAY,YAAY;kBACzF,KAAK,CAAC,KAAK;;kBAEX,YAAY,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,IAAI,CAAC,CAAC,CAAC;YAChG,SAAS,OAAOL,KAAY,CAAC,KAAK,CAAC,CAAC;SACvC;KACJ;IACD,WAAW,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE;QACxD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;KAC1B;CACJ;;ACvFM,MAAM,OAAO,CAAC;IACjB,WAAW,CAAC,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE;QAClC,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;KACxB;IACD,OAAO,SAAS,CAAC,GAAG,EAAE,KAAK,EAAE,OAAO,EAAE;QAClC,OAAO,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;KACjF;IACD,OAAO,SAAS,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE;QAChD,OAAO,OAAO,CAAC,mBAAmB,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,IAAI,YAAY,UAAU;cACrE,IAAI;;;;cAIJ,IAAI,UAAU,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,cAAc,MAAM,aAAa,eAAe,sBAAsB,OAAO,CAAC,CAAC;KACpI;IACD,OAAO,SAAS,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE;QAChD,OAAO,OAAO,CAAC,mBAAmB,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,IAAI,YAAY,YAAY;cACvE,IAAI;cACJ,IAAI,YAAY,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,cAAc,IAAI,WAAW,OAAO,cAAc,OAAO,CAAC,CAAC;KAClH;IACD,OAAO,UAAU,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE;QACjD,OAAO,OAAO,CAAC,mBAAmB,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,IAAI,YAAY,YAAY;cACvE,IAAI;cACJ,IAAI,YAAY,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,QAAQ,eAAe,KAAK,YAAY,OAAO,cAAc,OAAO,CAAC,CAAC;KACtH;IACD,OAAO,WAAW,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE;QAClD,OAAO,OAAO,CAAC,mBAAmB,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,IAAI,YAAY,YAAY;cACvE,IAAI;cACJ,IAAI,YAAY,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,SAAS,gBAAgB,MAAM,aAAa,OAAO,cAAc,OAAO,CAAC,CAAC;KAC1H;IACD,OAAO,UAAU,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE;QACjD,OAAO,OAAO,CAAC,mBAAmB,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,IAAI,YAAY,YAAY;cACvE,IAAI;cACJ,IAAI,YAAY,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,QAAQ,eAAe,KAAK,YAAY,OAAO,cAAc,OAAO,CAAC,CAAC;KACtH;IACD,OAAO,WAAW,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE;QAClD,OAAO,OAAO,CAAC,mBAAmB,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,IAAI,YAAY,YAAY;cACvE,IAAI;cACJ,IAAI,YAAY,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,SAAS,gBAAgB,MAAM,aAAa,OAAO,cAAc,OAAO,CAAC,CAAC;KAC1H;IACD,OAAO,mBAAmB,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,cAAc,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,GAAG,SAAS,gBAAgB,GAAG,GAAG,SAAS,gBAAgB,KAAK,GAAG,eAAe,sBAAsB,KAAK,GAAG,eAAe,sBAAsB,MAAM,GAAG,KAAK,GAAG,GAAG,EAAE,EAAE;QACjQ,MAAM,EAAE,GAAG,GAAG,YAAY,MAAM,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC;QAChD,OAAO,IAAI,OAAO,CAACS,aAAoB,CAAC,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,0BAA0B,CAAC,EAAE,EAAE,cAAc,CAAC,EAAE,kBAAkB,CAAC,EAAE,EAAE,MAAM,CAAC,EAAE,gBAAgB,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,gBAAgB,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,gBAAgB,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,kBAAkB,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,kBAAkB,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;KAC5T;CACJ;AACD,SAAS,gBAAgB,CAAC,EAAE,EAAE,IAAI,EAAE;IAChC,QAAQ,IAAI;QACR,KAAK,eAAe,sBAAsB,OAAO,EAAE,CAAC,aAAa,CAAC;QAClE,KAAK,QAAQ,eAAe,OAAO,EAAE,CAAC,MAAM,CAAC;QAC7C,KAAK,iBAAiB,wBAAwB,OAAO,EAAE,CAAC,eAAe,CAAC;QACxE,SAAS,OAAOT,KAAY,CAAC,IAAI,CAAC,CAAC;KACtC;CACJ;AACD,SAAS,kBAAkB,CAAC,EAAE,EAAE,MAAM,EAAE;IACpC,QAAQ,MAAM;QACV,KAAK,SAAS,gBAAgB,OAAO,EAAE,CAAC,OAAO,CAAC;QAChD,KAAK,QAAQ,eAAe,OAAO,EAAE,CAAC,MAAM,CAAC;QAC7C,KAAK,wBAAwB;YACzB,OAAO,EAAE,CAAC,sBAAsB,CAAC;QACrC,KAAK,uBAAuB;YACxB,OAAO,EAAE,CAAC,qBAAqB,CAAC;QACpC,KAAK,uBAAuB;YACxB,OAAO,EAAE,CAAC,qBAAqB,CAAC;QACpC,KAAK,sBAAsB;YACvB,OAAO,EAAE,CAAC,oBAAoB,CAAC;QACnC,SAAS,OAAOA,KAAY,CAAC,MAAM,CAAC,CAAC;KACxC;CACJ;AACD,SAAS,0BAA0B,CAAC,EAAE,EAAE,cAAc,EAAE;IACpD,QAAQ,cAAc;;QAElB,KAAK,IAAI,WAAW,OAAO,EAAE,CAAC,EAAE,CAAC;QACjC,KAAK,UAAU,iBAAiB,OAAO,EAAE,CAAC,QAAQ,CAAC;QACnD,KAAK,MAAM,aAAa,OAAO,EAAE,CAAC,IAAI,CAAC;QACvC,KAAK,KAAK,YAAY,OAAO,EAAE,CAAC,GAAG,CAAC;QACpC,KAAK,OAAO,cAAc,OAAO,EAAE,CAAC,KAAK,CAAC;QAC1C,KAAK,MAAM,aAAa,OAAO,EAAE,CAAC,IAAI,CAAC;QACvC,KAAK,OAAO,cAAc,OAAO,EAAE,CAAC,KAAK,CAAC;QAC1C,KAAK,MAAM,aAAa,OAAO,EAAE,CAAC,IAAI,CAAC;QACvC,KAAK,MAAM,aAAa,OAAO,EAAE,CAAC,IAAI,CAAC;QACvC,KAAK,MAAM,aAAa,OAAO,EAAE,CAAC,IAAI,CAAC;;QAEvC,KAAK,KAAK,YAAY,OAAO,EAAE,CAAC,GAAG,CAAC;QACpC,KAAK,WAAW,kBAAkB,OAAO,EAAE,CAAC,SAAS,CAAC;QACtD,KAAK,OAAO,cAAc,OAAO,EAAE,CAAC,KAAK,CAAC;QAC1C,KAAK,MAAM,aAAa,OAAO,EAAE,CAAC,IAAI,CAAC;QACvC,KAAK,QAAQ,eAAe,OAAO,EAAE,CAAC,MAAM,CAAC;QAC7C,KAAK,OAAO,cAAc,OAAO,EAAE,CAAC,KAAK,CAAC;QAC1C,KAAK,QAAQ,eAAe,OAAO,EAAE,CAAC,MAAM,CAAC;QAC7C,KAAK,OAAO,cAAc,OAAO,EAAE,CAAC,KAAK,CAAC;QAC1C,KAAK,OAAO,cAAc,OAAO,EAAE,CAAC,KAAK,CAAC;QAC1C,KAAK,OAAO,cAAc,OAAO,EAAE,CAAC,KAAK,CAAC;;QAE1C,KAAK,MAAM,aAAa,OAAO,EAAE,CAAC,IAAI,CAAC;QACvC,KAAK,YAAY,mBAAmB,OAAO,EAAE,CAAC,UAAU,CAAC;QACzD,KAAK,QAAQ,eAAe,OAAO,EAAE,CAAC,MAAM,CAAC;QAC7C,KAAK,OAAO,cAAc,OAAO,EAAE,CAAC,KAAK,CAAC;QAC1C,KAAK,SAAS,gBAAgB,OAAO,EAAE,CAAC,OAAO,CAAC;QAChD,KAAK,QAAQ,eAAe,OAAO,EAAE,CAAC,MAAM,CAAC;QAC7C,KAAK,SAAS,gBAAgB,OAAO,EAAE,CAAC,OAAO,CAAC;QAChD,KAAK,QAAQ,eAAe,OAAO,EAAE,CAAC,MAAM,CAAC;QAC7C,KAAK,QAAQ,eAAe,OAAO,EAAE,CAAC,MAAM,CAAC;QAC7C,KAAK,QAAQ,eAAe,OAAO,EAAE,CAAC,MAAM,CAAC;;QAE7C,KAAK,OAAO,cAAc,OAAO,EAAE,CAAC,KAAK,CAAC;QAC1C,KAAK,aAAa,oBAAoB,OAAO,EAAE,CAAC,WAAW,CAAC;QAC5D,KAAK,SAAS,gBAAgB,OAAO,EAAE,CAAC,OAAO,CAAC;QAChD,KAAK,QAAQ,eAAe,OAAO,EAAE,CAAC,MAAM,CAAC;QAC7C,KAAK,UAAU,iBAAiB,OAAO,EAAE,CAAC,QAAQ,CAAC;QACnD,KAAK,SAAS,gBAAgB,OAAO,EAAE,CAAC,OAAO,CAAC;QAChD,KAAK,UAAU,iBAAiB,OAAO,EAAE,CAAC,QAAQ,CAAC;QACnD,KAAK,SAAS,gBAAgB,OAAO,EAAE,CAAC,OAAO,CAAC;QAChD,KAAK,SAAS,gBAAgB,OAAO,EAAE,CAAC,OAAO,CAAC;QAChD,KAAK,SAAS,gBAAgB,OAAO,EAAE,CAAC,OAAO,CAAC;QAChD,SAAS,OAAOA,KAAY,CAAC,cAAc,CAAC,CAAC;KAChD;CACJ;AACD,SAAS,kBAAkB,CAAC,EAAE,EAAE,MAAM,EAAE;IACpC,QAAQ,MAAM;QACV,KAAK,KAAK,YAAY,OAAO,EAAE,CAAC,GAAG,CAAC;QACpC,KAAK,IAAI,WAAW,OAAO,EAAE,CAAC,EAAE,CAAC;QACjC,KAAK,KAAK,YAAY,OAAO,EAAE,CAAC,GAAG,CAAC;QACpC,KAAK,MAAM,aAAa,OAAO,EAAE,CAAC,IAAI,CAAC;QACvC,KAAK,aAAa,oBAAoB,OAAO,EAAE,CAAC,WAAW,CAAC;QAC5D,KAAK,YAAY,mBAAmB,OAAO,EAAE,CAAC,UAAU,CAAC;QACzD,KAAK,aAAa,oBAAoB,OAAO,EAAE,CAAC,WAAW,CAAC;QAC5D,KAAK,cAAc,qBAAqB,OAAO,EAAE,CAAC,YAAY,CAAC;QAC/D,SAAS,OAAOA,KAAY,CAAC,MAAM,CAAC,CAAC;KACxC;CACJ;AACD,SAAS,gBAAgB,CAAC,EAAE,EAAE,IAAI,EAAE;IAChC,QAAQ,IAAI;QACR,KAAK,eAAe,sBAAsB,OAAO,EAAE,CAAC,aAAa,CAAC;QAClE,KAAK,gBAAgB,uBAAuB,OAAO,EAAE,CAAC,cAAc,CAAC;QACrE,KAAK,cAAc,qBAAqB,OAAO,EAAE,CAAC,YAAY,CAAC;QAC/D,KAAK,MAAM,aAAa,OAAO,EAAE,CAAC,IAAI,CAAC;QACvC,KAAK,OAAO,cAAc,OAAO,EAAE,CAAC,KAAK,CAAC;QAC1C,KAAK,KAAK,YAAY,OAAO,EAAE,CAAC,GAAG,CAAC;QACpC,KAAK,OAAO,cAAc,OAAO,EAAE,CAAC,KAAK,CAAC;KAC7C;CACJ;;AC/IM,MAAM,WAAW,CAAC;IACrB,WAAW,CAAC,aAAa,EAAE,KAAK,EAAE,MAAM,EAAE,kBAAkB,EAAE;QAC1D,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACnC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;KAChD;IACD,OAAO,MAAM,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE;QACzD,MAAM,EAAE,GAAG,GAAG,YAAY,MAAM,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC;QAChD,MAAM,GAAG,GAAG,EAAE,CAAC,iBAAiB,EAAE,CAAC;QACnC,IAAI,CAAC,GAAG,EAAE;YACN,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC;SACnD;QACD,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,YAAY,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC;QAC5D,YAAY,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,CAAC,KAAK;YAChCU,KAAY,CAAC,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;YAClCA,KAAY,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;YACpC,EAAE,CAAC,oBAAoB,CAAC,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC,iBAAiB,GAAG,CAAC,EAAE,EAAE,CAAC,UAAU,EAAE,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SACzG,CAAC,CAAC;QACH,IAAI,KAAK,EAAE;YACPA,KAAY,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;YACjCA,KAAY,CAAC,MAAM,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;YACnC,EAAE,CAAC,oBAAoB,CAAC,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC,gBAAgB,EAAE,EAAE,CAAC,UAAU,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;SACzF;QACD,IAAI,OAAO,EAAE;YACTA,KAAY,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC;YACnCA,KAAY,CAAC,MAAM,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;YACrC,EAAE,CAAC,oBAAoB,CAAC,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,UAAU,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;SAC7F;QACD,MAAM,MAAM,GAAG,EAAE,CAAC,sBAAsB,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;QACzD,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QACzC,IAAI,MAAM,KAAK,EAAE,CAAC,oBAAoB,EAAE;YACpC,EAAE,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;YAC1B,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAC;SAC/C;QACD,OAAO,IAAI,WAAW,CAAC,GAAG,EAAE,KAAK,EAAE,MAAM,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,iBAAiB,GAAG,CAAC,CAAC,CAAC,CAAC;KACpG;CACJ;;;;"}